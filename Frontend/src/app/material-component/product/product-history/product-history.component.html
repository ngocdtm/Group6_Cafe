<div class="container mx-auto p-4">
    <h2 class="text-xl font-bold mb-4">Product History</h2>
  
    <div *ngIf="loading" class="flex justify-center items-center py-8">
      <mat-spinner diameter="40"></mat-spinner>
    </div>
  
    <div *ngIf="error" class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4">
      {{ error }}
    </div>
  
    <div *ngIf="!loading && !error" class="overflow-x-auto">
      <table mat-table [dataSource]="historyData" class="w-full">
        <!-- Modified Date Column -->
        <ng-container matColumnDef="modifiedDate">
          <th mat-header-cell *matHeaderCellDef>Date</th>
          <td mat-cell *matCellDef="let history">{{ history.modifiedDate }}</td>
        </ng-container>
  
        <!-- Modified By Column -->
        <ng-container matColumnDef="modifiedBy">
          <th mat-header-cell *matHeaderCellDef>User</th>
          <td mat-cell *matCellDef="let history">{{ history.modifiedBy }}</td>
        </ng-container>
  
        <!-- Action Column -->
        <ng-container matColumnDef="action">
          <th mat-header-cell *matHeaderCellDef>Action</th>
          <td mat-cell *matCellDef="let history" [ngClass]="getActionColor(history.action)">
            <div class="flex items-center">
              <mat-icon class="mr-2">{{ getActionIcon(history.action) }}</mat-icon>
              {{ history.action }}
            </div>
          </td>
        </ng-container>
  
        <!-- Changes Column -->
        <ng-container matColumnDef="changes">
          <th mat-header-cell *matHeaderCellDef>Changes</th>
          <td mat-cell *matCellDef="let history" class="whitespace-pre-line">
            {{ history.formattedChanges }}
          </td>
        </ng-container>
  
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>
  
      <div *ngIf="historyData.length === 0" class="text-center py-8 text-gray-500">
        No history records found
      </div>
    </div>
  </div>